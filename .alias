#
# UGE Cluster
#

alias qbad='qstat -f | awk "{if (NF > 5) print}"'
alias qslots='qstat -g c'
alias qerr='qstat -qs E -f -explain E | awk "/^---*$/ { print \"\"; next} /^queuename/ { print \"\$1, \$6, error job node\"; next } /^[^ ]*@/ { node_info=\"$1 - $6\"; next } { print node_info $0 }" | sed "s/\.ihme\.wash.[^ ]*//g; s/\t*queue [^ ]* marked / - /; s/ as result of / - /; s/.s failure at host / - on /"'
alias qqlogins='qstat -u \* | egrep "(QLOGIN|qlogins@)" | sort -k4 | awk "{ if (\$9 >= 10 && \$5 == \"r\") printf \"%d %-8s %10s %8s %s %d\n\", \$1, \$4, \$6, \$7, \$8, \$9, \$NF}"'
alias qexplain='for state in E a; do qstat -f -qs $state -explain $state; done'
alias qhjobs='qhost -j -h'

#
# Qumulo Aliases
# 

#run qq against one of the clusters
alias qqb="qq --credentials-store ~/.qfsd_cred.blah-fs --host blah-fs"
alias qqf="qq --credentials-store ~/.qfsd_cred.fast-fs --host fast-fs"
alias qqd="qq --credentials-store ~/.qfsd_cred.dengue-fs --host dengue-fs"
alias qqc="qq --credentials-store ~/.qfsd_cred.chagas-fs --host chagas-fs"

#login to a cluster
alias qqlb="qql blah"
alias qqlf="qql fast"
alias qqld="qql dengue"
alias qqlc="qql chagas"

#
# General
#

alias fill='cut -c1-`tput cols`'
alias fun='typeset -f'

#create a tombstoning directory for staged deletions
alias tombstone='sudo mkdir TO_BE_DELETED && sudo chgrp IHME-SA TO_BE_DELETED && sudo touch TO_BE_DELETED/timestamp.`date +"%s"`'
